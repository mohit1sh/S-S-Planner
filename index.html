<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smart Study Planner</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --primary: #6366f1; --secondary: #8b5cf6;
      --success: #10b981; --danger: #ef4444; --warning: #f59e0b;
      --light: #f9fafb; --dark: #1f2937; --gray: #6b7280;
      --border: #e5e7eb; --card: #ffffffcc; --card-dark: #1f2937cc;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      min-height: 100vh; color: var(--dark);
      transition: all 0.3s ease; padding-bottom: 2rem;
    }
    body.dark { background: #0f0f0f; color: var(--light); }
    header {
      position: sticky; top: 0; z-index: 100;
      backdrop-filter: blur(12px);
      background: rgba(255,255,255,0.6);
      border-bottom: 1px solid var(--border);
      padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center;
    }
    body.dark header { background: rgba(30,30,30,0.8); border-color: #333; }
    header h1 {
      font-size: 1.6rem; font-weight: bold;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .btn {
      padding: 0.6rem 1.2rem; border: none; border-radius: 10px; cursor: pointer;
      font-size: 0.9rem; font-weight: 600; transition: all 0.2s ease;
    }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
    .btn-primary { background: var(--primary); color: white; }
    .btn-danger { background: var(--danger); color: white; }
    .btn-success { background: var(--success); color: white; }
    .btn-secondary { background: #fff; border: 1px solid var(--border); color: var(--gray); }
    body.dark .btn-secondary { background: #222; color: var(--light); border: 1px solid #444; }

    main { max-width: 1100px; margin: 2rem auto; padding: 0 1rem; display: grid; gap: 2rem; }
    .card {
      background: var(--card); backdrop-filter: blur(8px);
      padding: 1.5rem; border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    }
    body.dark .card { background: var(--card-dark); box-shadow: 0 8px 24px rgba(0,0,0,0.4); }

    .task-input { display: grid; gap: 0.8rem; grid-template-columns: 2fr 1fr 1fr auto; }
    .task-input input, .task-input select {
      padding: 0.7rem; border: 1px solid var(--border);
      border-radius: 10px; font-size: 1rem; outline: none;
      transition: border 0.2s;
    }
    .task-input input:focus, .task-input select:focus { border-color: var(--primary); }

    .filters { display: flex; flex-wrap: wrap; gap: 0.6rem; margin-bottom: 1rem; }
    #searchInput {
      flex: 1; padding: 0.6rem 1rem; border-radius: 10px;
      border: 1px solid var(--border); font-size: 1rem;
    }

    #taskList { list-style: none; display: flex; flex-direction: column; gap: 1rem; }
    .task-item {
      display: flex; justify-content: space-between; align-items: center;
      padding: 1rem; border-radius: 12px;
      background: white; border: 1px solid var(--border);
      transition: all 0.2s ease;
    }
    body.dark .task-item { background: #2a2a2a; border: 1px solid #444; }
    .task-item:hover { transform: translateY(-3px); box-shadow: 0 6px 14px rgba(0,0,0,0.15); }
    .task-text { font-weight: 500; font-size: 1rem; }
    .task-item.completed .task-text { text-decoration: line-through; opacity: 0.6; }

    .chart-container { text-align: center; padding: 1rem; }
    canvas { background: transparent; border-radius: 12px; }
    body.dark canvas { background: transparent; }

    .stats {
      display: flex;
      justify-content: space-around;
      margin-top: 1rem;
      gap: 1rem;
    }
    .stat-card {
      background: white;
      padding: 0.6rem 1rem;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      font-weight: 600;
      font-size: 0.95rem;
    }
    body.dark .stat-card {
      background: #2a2a2a;
      color: var(--light);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    footer {
      text-align: center; padding: 1rem;
      backdrop-filter: blur(10px);
      background: rgba(0,0,0,0.4); color: white;
      border-radius: 12px; margin: 2rem auto 0; width: fit-content;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>ğŸ“š Smart Study Planner</h1>
    <button id="toggleTheme" class="btn btn-secondary">ğŸŒ™ Dark Mode</button>
  </header>

  <main>
    <div class="card">
      <h2>Add New Task âœï¸</h2><br>
      <div class="task-input">
        <input type="text" id="taskInput" placeholder="Enter task..." />
        <input type="date" id="taskDeadline" />
        <select id="taskPriority">
          <option value="Low">Low Priority</option>
          <option value="Medium" selected>Medium Priority</option>
          <option value="High">High Priority</option>
        </select>
        <button id="addTaskBtn" class="btn btn-primary">â• Add</button>
      </div>
    </div>

    <div class="card">
      <div class="filters">
        <input type="text" id="searchInput" placeholder="ğŸ” Search tasks..." />
        <button class="btn btn-secondary" onclick="filterTasks('all')">All</button>
        <button class="btn btn-success" onclick="filterTasks('pending')">Pending</button>
        <button class="btn btn-primary" onclick="filterTasks('completed')">Completed</button>
        <button class="btn btn-warning" onclick="filterTasks('High')">High Priority</button>
      </div>
      <ul id="taskList"></ul>
    </div>

    <div class="card chart-container">
      <h2>Progress Overview ğŸ“Š</h2><br>
      <canvas id="progressDonut" width="300" height="300"></canvas>
      <div class="stats">
        <div class="stat-card">âœ… Completed: <span id="statCompleted">0</span></div>
        <div class="stat-card">â³ Pending: <span id="statPending">0</span></div>
        <div class="stat-card">ğŸ“Œ Total: <span id="statTotal">0</span></div>
      </div>
    </div>

    <div class="card">
      <h2>Data Management âš™ï¸</h2><br>
      <button class="btn btn-success" onclick="exportTasks()">ğŸ“¤ Export</button>
      <input type="file" id="importFile" />
    </div>
  </main>

  <footer>Smart Study Planner Â© 2025 | Professional UI âœ¨</footer>

  <script>
    const addTaskBtn = document.getElementById("addTaskBtn");
    const taskInput = document.getElementById("taskInput");
    const taskDeadline = document.getElementById("taskDeadline");
    const taskPriority = document.getElementById("taskPriority");
    const taskList = document.getElementById("taskList");
    const searchInput = document.getElementById("searchInput");
    const toggleTheme = document.getElementById("toggleTheme");
    const importFile = document.getElementById("importFile");
    let tasks = [];

    function loadTasks() { tasks = JSON.parse(localStorage.getItem("studyTasks") || "[]"); renderTasks(); }
    function saveTasks() { localStorage.setItem("studyTasks", JSON.stringify(tasks)); }

    addTaskBtn.onclick = () => {
      const text = taskInput.value.trim();
      if (!text) return alert("Enter a task!");
      const newTask = { id: Date.now(), text, deadline: taskDeadline.value, priority: taskPriority.value, completed: false };
      tasks.push(newTask); saveTasks(); renderTasks();
      taskInput.value = ""; taskDeadline.value = "";
    };

    function deleteTask(id) { tasks = tasks.filter(t => t.id !== id); saveTasks(); renderTasks(); }
    function toggleTask(id) { tasks = tasks.map(t => t.id === id ? { ...t, completed: !t.completed } : t); saveTasks(); renderTasks(); }

    let currentFilter = "all";
    function filterTasks(type) { currentFilter = type; renderTasks(); }

    function renderTasks() {
      let filtered = tasks;
      if (currentFilter === "completed") filtered = tasks.filter(t => t.completed);
      if (currentFilter === "pending") filtered = tasks.filter(t => !t.completed);
      if (["High","Medium","Low"].includes(currentFilter)) filtered = tasks.filter(t => t.priority === currentFilter);

      const search = searchInput.value.toLowerCase();
      if (search) filtered = filtered.filter(t => t.text.toLowerCase().includes(search));

      taskList.innerHTML = filtered.map(t => `
        <li class="task-item ${t.completed ? 'completed' : ''}">
          <div>
            <span class="task-text">${t.text}</span><br>
            <small>ğŸ“… ${t.deadline || "No deadline"} | ğŸ”¥ ${t.priority}</small>
          </div>
          <div>
            <button class="btn btn-success" onclick="toggleTask(${t.id})">${t.completed ? "â†© Undo" : "âœ“ Done"}</button>
            <button class="btn btn-danger" onclick="deleteTask(${t.id})">ğŸ—‘ Delete</button>
          </div>
        </li>`).join("");
      updateChart();
    }

    function updateChart() {
      const completed = tasks.filter(t => t.completed).length;
      const pending = tasks.length - completed;
      const total = tasks.length || 1; 
      const percent = Math.round((completed / total) * 100);

      document.getElementById("statCompleted").textContent = completed;
      document.getElementById("statPending").textContent = pending;
      document.getElementById("statTotal").textContent = tasks.length;

      const ctx = document.getElementById("progressDonut").getContext("2d");
      ctx.clearRect(0, 0, 300, 300);

      ctx.beginPath();
      ctx.arc(150, 150, 100, 0, 2 * Math.PI);
      ctx.strokeStyle = "#e5e7eb";
      ctx.lineWidth = 25;
      ctx.stroke();

      ctx.beginPath();
      ctx.arc(150, 150, 100, -Math.PI / 2, (percent / 100) * 2 * Math.PI - Math.PI / 2);
      ctx.strokeStyle = "#10b981"; 
      ctx.lineWidth = 25;
      ctx.lineCap = "round";
      ctx.stroke();

      ctx.fillStyle = document.body.classList.contains("dark") ? "#f9fafb" : "#1f2937";
      ctx.font = "bold 24px Segoe UI";
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.fillText(percent + "%", 150, 150);
    }

    toggleTheme.onclick = () => {
      document.body.classList.toggle("dark");
      toggleTheme.textContent = document.body.classList.contains("dark") ? "â˜€ï¸ Light Mode" : "ğŸŒ™ Dark Mode";
      updateChart();
    };

    function exportTasks() {
      const blob = new Blob([JSON.stringify(tasks)], { type: "application/json" });
      const link = document.createElement("a"); link.href = URL.createObjectURL(blob); link.download = "tasks.json"; link.click();
    }
    importFile.onchange = (e) => {
      const file = e.target.files[0]; if (!file) return;
      const reader = new FileReader();
      reader.onload = (event) => { tasks = JSON.parse(event.target.result); saveTasks(); renderTasks(); };
      reader.readAsText(file);
    };

    loadTasks();
    searchInput.addEventListener("input", renderTasks);
  </script>
</body>
</html>
